### 1. ë‚´ ì»´í“¨í„°ì— ì˜ìƒ ì €ì¥í•˜ê¸° (ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥)

ë¸Œë¼ìš°ì €ì—ì„œ ì˜ìƒ ì£¼ì†Œ(URL)ë¥¼ ë°›ì•„ ì‹¤ì œë¡œ íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•ì…ë‹ˆë‹¤. `utils/download.ts` íŒŒì¼ì„ ë§Œë“¤ê±°ë‚˜ ë©”ì¸ í˜ì´ì§€ ì½”ë“œì— ì¶”ê°€í•˜ì„¸ìš”.

TypeScript

`// ì˜ìƒ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
const downloadVideo = async (url: string, filename: string) => {
  try {
    const response = await fetch(url);
    const blob = await response.blob(); // ì˜ìƒì„ ë°ì´í„° ë©ì–´ë¦¬(Blob)ë¡œ ë³€í™˜
    const blobUrl = window.URL.createObjectURL(blob);
    
    const link = document.createElement("a");
    link.href = blobUrl;
    link.download = filename || "ai-video.mp4";
    document.body.appendChild(link);
    link.click(); // ê°€ìƒì˜ í´ë¦­ì„ ë°œìƒì‹œì¼œ ë‹¤ìš´ë¡œë“œ ì‹œì‘
    document.body.removeChild(link);
    window.URL.revokeObjectURL(blobUrl); // ë©”ëª¨ë¦¬ ì •ë¦¬
  } catch (error) {
    alert("ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
  }
};`

---

### 2. JSON íŒŒì¼ì— ì‘ì—… ë‚´ì—­ ì €ì¥í•˜ê¸° (API)

ë°ì´í„°ë² ì´ìŠ¤(DB) ëŒ€ì‹  í”„ë¡œì íŠ¸ í´ë” ì•ˆì˜ `data/gallery.json` íŒŒì¼ì— ì €ì¥í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

**ì¤€ë¹„:** í”„ë¡œì íŠ¸ ë£¨íŠ¸(ìµœìƒìœ„)ì— `data` í´ë”ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— `gallery.json` íŒŒì¼ì„ ë§Œë“  ë’¤ `[]` ë¼ê³ ë§Œ ì ì–´ì£¼ì„¸ìš”.

**API ì½”ë“œ (`app/api/gallery/route.ts`):**

TypeScript

`import { promises as fs } from "fs";
import path from "path";
import { NextResponse } from "next/server";

const dataPath = path.join(process.cwd(), "data", "gallery.json");

// 1. ì €ì¥ëœ ê°¤ëŸ¬ë¦¬ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
export async function GET() {
  try {
    const fileContents = await fs.readFile(dataPath, "utf8");
    return NextResponse.json(JSON.parse(fileContents));
  } catch (error) {
    return NextResponse.json([]);
  }
}

// 2. ìƒˆë¡œìš´ ì˜ìƒ ì •ë³´ ì¶”ê°€í•˜ê¸°
export async function POST(request: Request) {
  try {
    const newItem = await request.json(); // { id, title, url, prompt, date }
    const fileContents = await fs.readFile(dataPath, "utf8");
    const list = JSON.parse(fileContents);
    
    list.unshift(newItem); // ìƒˆë¡œìš´ ì•„ì´í…œì„ ë§¨ ì•ì— ì¶”ê°€
    
    await fs.writeFile(dataPath, JSON.stringify(list, null, 2));
    return NextResponse.json({ success: true });
  } catch (error) {
    return NextResponse.json({ error: "ì €ì¥ ì‹¤íŒ¨" }, { status: 500 });
  }
}`

---

### 3. UIì— ê°¤ëŸ¬ë¦¬ ê¸°ëŠ¥ í•©ì¹˜ê¸° (`app/page.tsx` ìˆ˜ì •)

ê¸°ì¡´ UI ì½”ë“œì— ê°¤ëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  í‘œì‹œí•˜ëŠ” ë¶€ë¶„ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

TypeScript

`"use client";

import { useState, useEffect } from "react";
// ... ì´ì „ì˜ importë“¤ ...

export default function AICinemaCanvas() {
  const [gallery, setGallery] = useState<any[]>([]);
  // ... ê¸°ì¡´ ìƒíƒœê°’ë“¤ ...

  // í˜ì´ì§€ ì ‘ì† ì‹œ ê°¤ëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
  useEffect(() => {
    fetch("/api/gallery").then(res => res.json()).then(data => setGallery(data));
  }, []);

  // ì˜ìƒ ìƒì„± í›„ ê°¤ëŸ¬ë¦¬ì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
  const saveToGallery = async (videoUrl: string, prompt: string, title: string) => {
    const newItem = {
      id: Date.now(),
      title: title,
      url: videoUrl,
      prompt: prompt,
      date: new Date().toLocaleString()
    };

    await fetch("/api/gallery", {
      method: "POST",
      body: JSON.stringify(newItem),
    });
    
    setGallery([newItem, ...gallery]); // í™”ë©´ ëª©ë¡ ì—…ë°ì´íŠ¸
  };

  return (
    <div className="min-h-screen bg-slate-950 text-white p-6">
      {/* (ì¤‘ëµ) ê¸°ì¡´ ì˜ìƒ ì œì‘ UI ... */}

      {/* ë‚˜ë§Œì˜ ê°¤ëŸ¬ë¦¬ ì„¹ì…˜ */}
      <section className="w-full max-w-6xl mt-20">
        <h2 className="text-2xl font-bold mb-8 flex items-center gap-2">
          <PlayCircle className="text-indigo-500" /> ë‚˜ë§Œì˜ ì˜ìƒ ë³´ê´€í•¨
        </h2>
        
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {gallery.map((item) => (
            <div key={item.id} className="bg-slate-900 rounded-xl overflow-hidden border border-slate-800 hover:border-indigo-500/50 transition-all">
              <video src={item.url} className="w-full aspect-video object-cover" controls />
              <div className="p-4">
                <h3 className="font-bold text-slate-200 truncate">{item.title}</h3>
                <p className="text-xs text-slate-500 mt-1">{item.date}</p>
                <button 
                  onClick={() => downloadVideo(item.url, `${item.title}.mp4`)}
                  className="mt-4 flex items-center gap-2 text-sm text-indigo-400 hover:text-indigo-300"
                >
                  <Download size={16} /> PCì— ì €ì¥í•˜ê¸°
                </button>
              </div>
            </div>
          ))}
        </div>
      </section>
    </div>
  );
}`

---

### ğŸ’¡ ì´ˆë³´ìë¥¼ ìœ„í•œ êµ¬í˜„ íŒ

1. **JSON ì €ì¥ì˜ í•œê³„:** ì´ ë°©ì‹ì€ ë‚´ ì»´í“¨í„°(ë¡œì»¬)ì—ì„œ ê°œë°œí•  ë•ŒëŠ” ì˜ ì‘ë™í•˜ì§€ë§Œ, ë‚˜ì¤‘ì— Vercel ê°™ì€ ê³³ì— ë¬´ë£Œë¡œ ë°°í¬í•˜ë©´ íŒŒì¼ ìˆ˜ì • ê¶Œí•œ ë•Œë¬¸ì— ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë°°í¬ ì‹œì—ëŠ” Supabase ê°™ì€ ë¬´ë£Œ DB ì„œë¹„ìŠ¤ë¥¼ ì“°ëŠ” ê²ƒì´ ì •ì„ì´ì§€ë§Œ, ì—°ìŠµìš©ìœ¼ë¡œëŠ” JSONì´ ê°€ì¥ ì‰½ìŠµë‹ˆë‹¤.)
2. **ë³´ê´€í•¨ì˜ ê°€ì¹˜:** ì˜ìƒì„ í•˜ë‚˜ì”© ë§Œë“¤ ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ë³´ê´€í•¨ì— ìŒ“ì´ê²Œ ë˜ë¯€ë¡œ, ë‚˜ì¤‘ì— ì´ ì¡°ê°ë“¤ì„ ëª¨ì•„ì„œ 1ë¶„ì§œë¦¬ ê¸´ ì˜ìƒì„ í¸ì§‘í•˜ê¸° í›¨ì”¬ ìˆ˜ì›”í•´ì§‘ë‹ˆë‹¤.
3. **íŒŒì¼ ì´ë¦„:** ë‹¤ìš´ë¡œë“œ ì‹œ íŒŒì¼ ì´ë¦„ì´ ê²¹ì¹˜ì§€ ì•Šë„ë¡ `ë‚ ì§œ_ì œëª©.mp4` í˜•íƒœë¡œ ì €ì¥ë˜ê²Œ ì„¤ì •í•˜ë©´ ê´€ë¦¬í•˜ê¸° í¸í•©ë‹ˆë‹¤.